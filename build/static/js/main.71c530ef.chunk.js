(this["webpackJsonpqr-roguer"]=this["webpackJsonpqr-roguer"]||[]).push([[0],{74:function(e,t){},75:function(e,t){},76:function(e,t){},83:function(e,t,n){"use strict";n.r(t);var i=n(0),c=n.n(i),a=n(11),r=n.n(a),o=n(35),s=n(119),l=n(124),b=n(14),u=n(46),f=n(5),j=Object(s.a)((function(){return{container:{display:"flex",flexGrow:1}}})),d=function(e){var t=e.setFabricCanvas,n=Object(i.useRef)(),c=Object(i.useRef)(),a=j();return Object(i.useEffect)((function(){if(n.current){var e=new b.fabric.Canvas(n.current,{enableRetinaScaling:!1,skipOffscreen:!1});e.maskWidth=8,e.maskHeight=8,function(e){var t=e.maskWidth,n=e.maskHeight,i=b.fabric.MaskItem.prototype.size;e.setDimensions({width:t*i,height:n*i});var c=t*n;e.mask=new Array(c);for(var a=0;a<n;a++)for(var r=0;r<t;r++){var o=new b.fabric.MaskItem({top:a*i,left:r*i});e.mask[a*t+r]=o}e.add.apply(e,Object(u.a)(e.mask))}(e),t(e),window.fabricCanvas=e}}),[]),Object(f.jsx)("div",{ref:c,className:a.container,children:Object(f.jsx)("canvas",{ref:n})})},v=c.a.createContext(null),h=c.a.createContext(null),O=c.a.createContext(null),x=function(){return Object(i.useContext)(v)},p=function(){return Object(i.useContext)(O)},m=Object(s.a)((function(){return{container:{display:"flex",flexGrow:1}}})),y=function(e){var t=e.setFabricCanvas,n=Object(i.useRef)(),c=Object(i.useRef)(),a=m();return Object(i.useEffect)((function(){if(n.current){var e=new b.fabric.Canvas(n.current);t(e),window.previewCanvas=e}}),[t]),Object(f.jsx)("div",{ref:c,className:a.container,children:Object(f.jsx)("canvas",{ref:n})})},g=n(125),k=n(123),C=n(42),w=n(129),I=n(128),S=n(53),z=function(){var e=p();return Object(i.useCallback)((function(t){e.map((function(e){e.set(Object(S.a)({dirty:!0},t))}));var n=e[0];n&&(n.canvas.fire("object:propertySet"),n.canvas.requestRenderAll())}),[e])},F=n(130),M=Object(s.a)({formControl:{width:"100%",margin:"16px"}}),P=function(e){var t=e.disabled,n=e.property,i=e.value,c=e.label,a=e.min,r=e.max,o=e.step,s=z(),l=M();return Object(f.jsx)(f.Fragment,{children:Object(f.jsxs)(I.a,{className:l.formControl,children:[Object(f.jsx)(w.a,{id:"slider-".concat(n),children:c}),Object(f.jsx)(F.a,{labelId:"slider-".concat(n),value:i,onChange:function(e,t){return s(Object(C.a)({},n,t))},label:c,min:a,max:r,step:o,disabled:t})]})})},V=Object(i.memo)(P),A=(n(3),n(122)),R=n(126),B=n(131),D=n(127),N=Object(s.a)((function(e){return{checkbox:{color:"inherit","&.Mui-checked":{color:"inherit"}}}})),E=function(e){var t=e.bit,n=e.color,c=N().checkbox,a=p()[0],r=z(),o=(null===a||void 0===a?void 0:a.bitValue)&t,s=Object(i.useCallback)((function(){return r({bitValue:a.bitValue^t})}),[t,a,r]);return Object(f.jsx)(B.a,{labelPlacement:"start",style:{color:n},control:Object(f.jsx)(D.a,{disabled:!a,className:c,checked:o,onChange:s}),label:n})},W=function(){var e,t,n=x(),i=p()[0],c={t:function(e){return e}}.t;return Object(f.jsxs)(A.a,{container:!0,spacing:2,children:[Object(f.jsxs)(A.a,{item:!0,xs:12,children:[Object(f.jsx)(g.a,{label:c("mask width"),value:null===n||void 0===n?void 0:n.maskWidth,variant:"outlined"}),Object(f.jsx)(g.a,{label:c("mask height"),value:null===n||void 0===n?void 0:n.maskHeight,variant:"outlined"}),Object(f.jsx)(k.a,{variant:"contained",children:c("OK")})]}),Object(f.jsx)(A.a,{item:!0,xs:2,children:Object(f.jsxs)(R.a,{display:"flex",flexDirection:"column",children:[Object(f.jsx)(E,{color:"red",bit:4}),Object(f.jsx)(E,{color:"green",bit:2}),Object(f.jsx)(E,{color:"blue",bit:1})]})}),Object(f.jsx)(A.a,{item:!0,xs:4,children:Object(f.jsxs)(R.a,{display:"flex",flexDirection:"column",children:[Object(f.jsx)(V,{label:c("On intensity"),property:"onIntensity",min:0,step:1,disabled:!i,max:15,value:null!==(e=null===i||void 0===i?void 0:i.onIntensity)&&void 0!==e?e:0}),Object(f.jsx)(V,{label:c("Off intensity"),property:"offIntensity",min:0,step:1,disabled:!i,max:15,value:null!==(t=null===i||void 0===i?void 0:i.offIntensity)&&void 0!==t?t:0})]})})]})},q=function(){var e=x(),t=Object(i.useState)([]),n=Object(o.a)(t,2),c=n[0],a=n[1];return Object(i.useEffect)((function(){var t=function(){a(Object(u.a)(e.getActiveObjects()))};return e&&(e.on("object:propertySet",t),e.on("selection:cleared",t),e.on("selection:created",t),e.on("selection:updated",t)),function(){e&&(e.off("object:propertySet",t),e.off("selection:cleared",t),e.off("selection:created",t),e.off("selection:updated",t))}}),[e]),Object(f.jsx)(O.Provider,{value:c,children:Object(f.jsx)(W,{})})};b.fabric.ActiveSelection.prototype.controls={},b.fabric.ActiveSelection.prototype.hasBorders=!1,b.fabric.ActiveSelection.prototype.lockMovementX=!0,b.fabric.ActiveSelection.prototype.lockMovementY=!0,b.fabric.ActiveSelection.prototype.perPixelTargetFind=!0;var G=b.fabric.util.createClass(b.fabric.Object,{type:"maskItem",size:48,strokeWidth:0,bitValue:4,onIntensity:8,offIntensity:2,fill:"not-used",lockMovementX:!0,lockMovementY:!0,borderColor:"black",controls:{},cacheProperties:b.fabric.Object.prototype.cacheProperties.concat("bitValue","size","onIntensity","offIntensity"),initialize:function(e){b.fabric.Object.prototype.initialize.call(this,e),this.width=this.size,this.height=this.size},_render:function(e){var t=4&this.bitValue,n=2&this.bitValue,i=1&this.bitValue;e.fillStyle="rgb(".concat(t?255:0,",").concat(n?255:0,",").concat(i?255:0,")"),e.fillRect(-this.size/2,-this.size/2,this.size-7,this.size),this.drawBar(e,"red",t,6),this.drawBar(e,"green",n,4),this.drawBar(e,"blue",i,2)},drawBar:function(e,t,n,i){var c=this.size/2/16,a=n?-c*(this.onIntensity+1):0,r=n?c*(this.onIntensity+1):c*(this.offIntensity+1);e.fillStyle=t,e.fillRect(this.size/2-i,a,2,r)},toObject:function(){return b.fabric.Object.prototype.toObject.call(this,["size","bitValue","onIntensity","offIntensity"])}});G.fromObject=function(e,t){},b.fabric.MaskItem=G;var H=Object(s.a)((function(e){return{root:{display:"flex",flexDirection:"column",height:"100vh",padding:"16px"},content:{display:"flex",flexDirection:"row",flexGrow:1,height:"100%",padding:0,transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})}}}));function T(){var e=H(),t=Object(i.useState)(null),n=Object(o.a)(t,2),c=n[0],a=n[1],r=Object(i.useState)(null),s=Object(o.a)(r,2),b=s[0],u=s[1];return Object(f.jsx)(h.Provider,{value:b,children:Object(f.jsx)(v.Provider,{value:c,children:Object(f.jsxs)("div",{className:e.root,children:[Object(f.jsx)(l.a,{}),Object(f.jsx)(q,{}),Object(f.jsxs)("main",{className:e.content,children:[Object(f.jsx)(d,{setFabricCanvas:a}),Object(f.jsx)(y,{setFabricCanvas:u})]})]})})})}var J=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,133)).then((function(t){var n=t.getCLS,i=t.getFID,c=t.getFCP,a=t.getLCP,r=t.getTTFB;n(e),i(e),c(e),a(e),r(e)}))};r.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(T,{})}),document.getElementById("root")),J()}},[[83,1,2]]]);
//# sourceMappingURL=main.71c530ef.chunk.js.map